<mvc:View
    controllerName="demoextend.ext.view.Wizard"
    xmlns:m="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:l="sap.ui.layout"
    xmlns:smarttable="sap.ui.comp.smarttable"
    xmlns:smartfield="sap.ui.comp.smartfield"
    xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
    xmlns:table="sap.ui.table"
    displayBlock="true">
    
    <m:Page id="wizardPage" title="Product Wizard" showHeader="true" class="sapUiResponsiveContentPadding">
        <m:content>
            <m:Wizard id="productWizard" 
                    showNextButton="true" 
                    complete="onWizardComplete"
                    class="sapUiResponsiveMargin">
                
                <!-- Step 1: Product Management -->
                <m:WizardStep id="step1" 
                           title="Product Management" 
                           validated="true"
                           icon="sap-icon://product"
                           class="sapUiResponsiveMargin">
                    
                    <l:Grid id="step1Grid" defaultSpan="XL6 L6 M6 S12" class="sapUiSmallMarginTop">
                        
                        <!-- Left side - Product Table -->
                        <l:content>
                            <m:VBox id="step1LeftVBox" width="100%" class="sapUiLargeMarginEnd">
                                <m:HBox id="step1HeaderBox" justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginBottom">
                                    <m:Title id="productsTableTitle" text="Product Management" level="H3"/>
                                    <m:Button id="importFileButton" text="Import File" icon="sap-icon://upload" press="onImportFile" type="Emphasized"/>
                                </m:HBox>
                                
                                <table:Table id="productTable" 
                                             rows="{productModel>/results}" 
                                             rowMode="Fixed" 
                                             selectionMode="MultiToggle" 
                                             width="100%"
                                             class="sapUiSmallMarginBottom"
                                             rowSelectionChange="onTableSelectionChange">
                                    <table:extension>
                                        <m:OverflowToolbar id="productTableToolbar" style="Clear">
                                            <m:Title id="productTableTitle" text="Product List" level="H2"/>
                                            <m:ToolbarSpacer id="productTableSpacer"/>
                                            <m:Button id="editSelectedButton" text="Edit Selected" icon="sap-icon://edit" press="onEditSelected" type="Emphasized" enabled="false" class="sapUiSmallMargin"/>
                                            <m:Button id="deleteSelectedButton" text="Delete Selected" icon="sap-icon://delete" press="onDeleteSelected" type="Negative" enabled="false" class="sapUiSmallMargin"/>
                                            <m:Button id="debugButton" text="Debug" icon="sap-icon://sys-help" press="_debugTableStatus" class="sapUiSmallMargin"/>
                                            <m:Button id="testImportButton" text="Test Import" icon="sap-icon://test" press="_testImport" class="sapUiSmallMargin"/>
                                            <m:Button id="forceUpdateButton" text="Force Update" icon="sap-icon://refresh" press="_forceUpdateTable" class="sapUiSmallMargin"/>
                                            <m:Button id="checkBindingButton" text="Check Binding" icon="sap-icon://check" press="_checkAndFixBinding" class="sapUiSmallMargin"/>
                                        </m:OverflowToolbar>
                                    </table:extension>
                                    
                                    <table:rowSettingsTemplate>
                                        <table:RowSettings id="productTableRowSettings" highlight="Success"/>
                                    </table:rowSettingsTemplate>
                                    
                                    <table:columns>
                                        <!-- Selection Column -->
                                        <table:Column id="selectionColumn" width="50px" hAlign="Center">
                                            <m:Label id="selectionColumnLabel" text="Select"/>
                                            <table:template>
                                                <m:CheckBox id="selectionCheckBox" 
                                                         selected="{productModel>selected}" 
                                                         select="onCheckboxSelectionChange"/>
                                            </table:template>
                                        </table:Column>
                                        
                                        <!-- Sales Organization -->
                                        <table:Column id="salesOrgColumn" width="150px">
                                            <m:Label id="salesOrgColumnLabel" text="Sales Organization"/>
                                            <table:template>
                                                <m:Text id="salesOrgCell" text="{productModel>SalesOrganization}"/>
                                            </table:template>
                                        </table:Column>
                                        
                                        <!-- Distribution Channel -->
                                        <table:Column id="distChannelColumn" width="150px">
                                            <m:Label id="distChannelColumnLabel" text="Distribution Channel"/>
                                            <table:template>
                                                <m:Text id="distChannelCell" text="{productModel>DistributionChannel}"/>
                                            </table:template>
                                        </table:Column>
                                        
                                        <!-- Organization Division -->
                                        <table:Column id="orgDivisionColumn" width="150px">
                                            <m:Label id="orgDivisionColumnLabel" text="Organization Division"/>
                                            <table:template>
                                                <m:Text id="orgDivisionCell" text="{productModel>OrganizationDivision}"/>
                                            </table:template>
                                        </table:Column>
                                        
                                        <!-- Sold To Party -->
                                        <table:Column id="soldToPartyColumn" width="150px">
                                            <m:Label id="soldToPartyColumnLabel" text="Sold To Party"/>
                                            <table:template>
                                                <m:Text id="soldToPartyCell" text="{productModel>SoldToParty}"/>
                                            </table:template>
                                        </table:Column>
                                        
                                        <!-- Product -->
                                        <table:Column id="productColumn" width="150px">
                                            <m:Label id="productColumnLabel" text="Product"/>
                                            <table:template>
                                                <m:Text id="productCell" text="{productModel>Product}"/>
                                            </table:template>
                                        </table:Column>
                                        
                                        <!-- Quantity -->
                                        <table:Column id="quantityColumn" width="150px">
                                            <m:Label id="quantityColumnLabel" text="Quantity"/>
                                            <table:template>
                                                <m:ObjectNumber id="quantityCell" 
                                                             number="{ parts:[{path:'productModel>Quantity'},{path:'productModel>Unit'}], type: 'sap.ui.model.type.Unit', formatOptions: {showMeasure: false} }" 
                                                             textDirection="LTR" 
                                                             textAlign="Right"/>
                                            </table:template>
                                        </table:Column>
                                        
                                        <!-- Unit -->
                                        <table:Column id="unitColumn" width="100px">
                                            <m:Label id="unitColumnLabel" text="Unit"/>
                                            <table:template>
                                                <m:Text id="unitCell" text="{productModel>Unit}"/>
                                            </table:template>
                                        </table:Column>
                                    </table:columns>
                                </table:Table>
                            </m:VBox>
                        </l:content>
                        
                        <!-- Right side - Second Table (placeholder for now) -->
                        <l:content>
                            <m:VBox id="step1RightVBox" width="100%" class="sapUiLargeMarginStart">
                                <m:HBox id="step1RightHeaderBox" justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginBottom">
                                    <m:Title id="secondTableTitle" text="Second Table" level="H3"/>
                                </m:HBox>
                                
                                <!-- Placeholder for second table -->
                                <m:Panel id="secondTablePanel" headerText="Second Table" class="sapUiSmallMarginBottom">
                                    <m:Text id="secondTablePlaceholderText" text="Second table content will be added here"/>
                                </m:Panel>
                            </m:VBox>
                        </l:content>
                        
                    </l:Grid>
                    
                </m:WizardStep>
                
                <!-- Step 2: Review and Confirm -->
                <m:WizardStep id="step2" 
                           title="Review and Confirm" 
                           validated="false"
                           icon="sap-icon://review">
                    <m:VBox id="step2VBox" class="sapUiSmallMargin">
                        <m:Text id="step2Text" text="Review your selections and confirm"/>
                    </m:VBox>
                </m:WizardStep>
                
                <!-- Step 3: Complete -->
                <m:WizardStep id="step3" 
                           title="Complete" 
                           validated="false"
                           icon="sap-icon://accept">
                    <m:VBox id="step3VBox" class="sapUiSmallMargin">
                        <m:Text id="step3Text" text="Process completed successfully"/>
                    </m:VBox>
                </m:WizardStep>
                
            </m:Wizard>
        </m:content>
        
        <m:footer>
            <m:Toolbar id="footerToolbar">
                <m:ToolbarSpacer id="footerToolbarSpacer"/>
                <m:Button id="cancelButton" text="Cancel" press="onCancel" class="sapUiSmallMarginEnd"/>
                <m:Button id="completeButton" text="Complete" press="onComplete" type="Emphasized" enabled="false"/>
            </m:Toolbar>
        </m:footer>
        
    </m:Page>
    
</mvc:View>
